<%- model_class = Route -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.titleize %></h1>
</div>
<div class="span9">
  <div id="map-container" data-route="<%=@route.points%>">
    <div id="map-canvas"></div>
  </div>
</div>

<div class="span3">
  <dl class="dl-horizontal">
    <dt><strong><%= model_class.human_attribute_name(:name) %>:</strong></dt>
    <dd><%= @route.name %></dd>

    <dt><strong><%= model_class.human_attribute_name(:category_id) %>:</strong></dt>
    <dd><%= @route.category.name %></dd>
  </dl>

  <%= link_to t('.back', :default => t("helpers.links.back")),
                routes_path, :class => 'btn btn-default'  %>


  <%= render 'comments/form', comment: Comment.new %>
  <% user_favourite = Favourite.where(user_id: current_user.id, route_id: @route.id).first %>
  <% if (user_favourite.present?) %>
  <%= link_to 'Remove Favourite', user_favourite, method: :delete %>
    <% else %>
      <%= form_for(Favourite.new) do |f| %>
        <%= f.hidden_field :route_id, value: @route.id %> 
        <%= f.submit %>
      <% end %>
    <% end %>



  <% @route.comments.each do |comment| %>
        <div>
          <p><%= comment.comment %></p>
          <span><%= comment.user.email %></span>


          <span><%= comment.created_at %></span>   


            <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                        comment_path(comment),
                        :method => :delete,
                        :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                        :class => 'btn btn-xs btn-danger' %>

        </div>
    <% end %>
</div>